import{$ as re,A as o,B as u,C as y,D as _,E as N,F as d,G as x,H as s,I as w,J as I,K as M,L as Q,M as X,N as Y,O as T,P as O,Q as ee,R as te,U as ne,Y as oe,_ as ie,a as v,b as C,d as z,da as ae,ea as A,f as j,fa as se,g as $,ga as le,h as U,ha as ce,i as B,ia as me,j as G,ja as ue,k as E,ka as pe,l as D,la as de,m as P,n as H,na as fe,o as R,p as W,pa as be,q as Z,r as l,s as b,t as h,u as J,v as p,w as m,x as K,z as r}from"./chunk-B7XKK3HT.js";var F=(()=>{class t{constructor(){this.customStyle={color:"#064D9E",fontWeight:600},this.sanitizer=B(oe),this.detailClick=new H}set content(e){typeof e.abstract=="string"?this.book=C(v({},e),{abstract:this.sanitizer.bypassSecurityTrustHtml(e.abstract)}):this.book=e}handleDetailClick(e){e.preventDefault(),console.log("Click Details-Link:",e),this.detailClick.emit(this.book)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-book-card"]],inputs:{content:"content"},outputs:{detailClick:"detailClick"},decls:7,vars:5,consts:[["href","",3,"click"],[3,"innerHTML"]],template:function(n,i){n&1&&(r(0,"h3"),s(1),o(),r(2,"h4"),s(3),o(),r(4,"a",0),d("click",function(k){return i.handleDetailClick(k)}),s(5,"Details"),o(),u(6,"p",1)),n&2&&(l(),w(i.book.title),l(),K(i.customStyle),l(),w(i.book.author),l(3),m("innerHTML",i.book.abstract,W))},styles:["[_nghost-%COMP%]{display:inline-block;border-radius:2px;margin:1rem;padding:1rem;width:300px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}[_nghost-%COMP%]:hover{box-shadow:0 14px 28px #00000040,0 10px 10px #00000038}"]})}}return t})();var he=(()=>{class t{transform(e,n){return n?e?e.filter(i=>i.title.toLocaleLowerCase().includes(n.toLocaleLowerCase())):[]:e||[]}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275pipe=J({name:"bookFilter",type:t,pure:!0})}}return t})();function q(t,a){let e=!a?.manualCleanup;e&&!a?.injector&&G(q);let n=e?a?.injector?.get(P)??B(P):null,i=ye(a?.equal),c;a?.requireSync?c=R({kind:0},{equal:i}):c=R({kind:1,value:a?.initialValue},{equal:i});let k=t.subscribe({next:f=>c.set({kind:1,value:f}),error:f=>{if(a?.rejectErrors)throw f;c.set({kind:2,error:f})}});if(a?.requireSync&&c().kind===0)throw new j(601,!1);return n?.onDestroy(k.unsubscribe.bind(k)),Y(()=>{let f=c();switch(f.kind){case 1:return f.value;case 2:throw f.error;case 0:throw new j(601,!1)}},{equal:a?.equal})}function ye(t=Object.is){return(a,e)=>a.kind===1&&e.kind===1&&t(a.value,e.value)}var g=(()=>{class t{#e="http://localhost:4730";constructor(e){this.http=e}getAll(){return this.http.get(`${this.#e}/books`)}getByIsbn(e){return this.http.get(`${this.#e}/books/${e}`)}create(e){return this.http.post("http://localhost:4730/books",e)}static{this.\u0275fac=function(n){return new(n||t)(U(ne))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _e(t,a){if(t&1){let e=N();r(0,"app-book-card",3),d("detailClick",function(i){E(e);let c=x();return D(c.goToBookDetails(i))}),o()}if(t&2){let e=a.$implicit;m("content",e)}}var ke=(()=>{class t{constructor(e,n){this.bookApi=e,this.router=n,this.bookSearchTerm="",this.books=q(this.bookApi.getAll())}goToBookDetails(e){this.router.navigate(["books","detail",e.isbn])}updateBookSearchTerm(e){this.bookSearchTerm=e.target.value}static{this.\u0275fac=function(n){return new(n||t)(b(g),b(ie))}}static{this.\u0275cmp=h({type:t,selectors:[["app-book"]],decls:6,vars:4,consts:[["type","search","placeholder","Filter your books...",1,"book-filter",3,"input"],["routerLink","new"],[3,"content","detailClick",4,"ngFor","ngForOf"],[3,"detailClick","content"]],template:function(n,i){n&1&&(r(0,"input",0),d("input",function(k){return i.updateBookSearchTerm(k)}),o(),r(1,"div")(2,"a",1),s(3,"Create Book"),o()(),p(4,_e,1,1,"app-book-card",2),M(5,"bookFilter")),n&2&&(l(4),m("ngForOf",X(5,1,i.books(),i.bookSearchTerm)))},dependencies:[te,T,F,he,re],styles:[".book-filter[_ngcontent-%COMP%]{display:block;margin:1rem;padding:12px 20px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}"]})}}return t})();function xe(t,a){if(t&1&&(y(0),r(1,"h3"),s(2),o(),r(3,"h4"),s(4),o(),r(5,"section",1)(6,"p"),s(7),r(8,"i"),s(9),o()(),u(10,"img",2),o(),_()),t&2){let e=a.ngIf;l(2),I(" ",e.title," "),l(2),I("ISBN - ",e.isbn,""),l(3),I(" ",e.abstract," "),l(2),w(e.author),l(),m("src",e.cover,Z)("alt",e.title)}}var ge=(()=>{class t{constructor(e){this.bookApi=e}set isbn(e){this.book$=this.bookApi.getByIsbn(e)}static{this.\u0275fac=function(n){return new(n||t)(b(g))}}static{this.\u0275cmp=h({type:t,selectors:[["app-book-detail"]],inputs:{isbn:"isbn"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"book-insights"],[1,"book-cover",3,"src","alt"]],template:function(n,i){n&1&&(p(0,xe,11,6,"ng-container",0),M(1,"async")),n&2&&m("ngIf",Q(1,1,i.book$))},dependencies:[ee,O],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.book-insights[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem}.book-cover[_ngcontent-%COMP%]{max-height:200px}"]})}}return t})();var ve=(t,a)=>confirm("Do you really want to leave?");function V(){return t=>{let a=t.value;return a&&/[0-9]+/.test(a)?{invalidAuthor:!0}:null}}function we(t,a){t&1&&(r(0,"small"),s(1," Please insert a title. "),o())}function Se(t,a){t&1&&(r(0,"small"),s(1," Please insert an Author. "),o())}function Be(t,a){t&1&&(r(0,"small"),s(1," Der Name eines Autors darf keine Zahlen beinhalten! "),o())}function Ee(t,a){if(t&1){let e=N();y(0),r(1,"label",1)(2,"span"),s(3,"Author"),o(),u(4,"input",13),p(5,Se,2,0,"small",4)(6,Be,2,0,"small",4),o(),r(7,"button",14),d("click",function(){let i=E(e).index,c=x();return D(c.deleteAuthor(i))}),s(8," Remove Author "),o(),_()}if(t&2){let e=a.$implicit,n=a.index;l(4),m("formControlName",n),l(),m("ngIf",(e==null?null:e.dirty)&&(e==null?null:e.hasError("required"))),l(),m("ngIf",(e==null?null:e.dirty)&&(e==null?null:e.hasError("invalidAuthor")))}}function De(t,a){if(t&1&&(r(0,"div")(1,"h2"),s(2,"Successfully submitted"),o(),u(3,"app-book-card",15),o()),t&2){let e=x();l(3),m("content",e.newBook)}}var Ce=(()=>{class t{constructor(e,n){this.formBuilder=e,this.bookApiService=n,this.submitted=!1,this.form=this.formBuilder.nonNullable.group({title:["",[A.required]],subtitle:[""],authors:this.formBuilder.array([["",[A.required,V()]]]),abstract:[""],isbn:[""],cover:[""]})}submit(){let e=this.form.getRawValue().authors[0]||"n/a";this.bookApiService.create(C(v({},this.form.getRawValue()),{author:e})).pipe(z(1)).subscribe(n=>{this.newBook=n,this.submitted=!0})}get authors(){return this.form.controls.authors}deleteAuthor(e){this.authors.removeAt(e)}addAuthor(){this.authors.push(new ce("",[A.required,V()]))}static{this.\u0275fac=function(n){return new(n||t)(b(fe),b(g))}}static{this.\u0275cmp=h({type:t,selectors:[["app-book-new"]],decls:32,vars:5,consts:[[3,"ngSubmit","formGroup"],[1,"form-field"],["formControlName","isbn"],["formControlName","title"],[4,"ngIf"],["formControlName","subtitle"],["formArrayName","authors"],[4,"ngFor","ngForOf"],["type","button",3,"click"],["formControlName","abstract"],["formControlName","cover"],[1,"form-actions"],["type","submit",3,"disabled"],[3,"formControlName"],[3,"click"],[3,"content"]],template:function(n,i){if(n&1&&(r(0,"h2"),s(1,"New"),o(),r(2,"form",0),d("ngSubmit",function(){return i.submit()}),r(3,"label",1)(4,"span"),s(5,"ISBN"),o(),u(6,"input",2),o(),r(7,"label",1)(8,"span"),s(9,"Title"),o(),u(10,"input",3),p(11,we,2,0,"small",4),o(),r(12,"label",1)(13,"span"),s(14,"Subtitle"),o(),u(15,"input",5),o(),y(16,6),p(17,Ee,9,3,"ng-container",7),_(),r(18,"button",8),d("click",function(){return i.addAuthor()}),s(19," Author hinzuf\xFCgen "),o(),r(20,"label",1)(21,"span"),s(22,"Abstract"),o(),u(23,"input",9),o(),r(24,"label",1)(25,"span"),s(26,"Cover"),o(),u(27,"input",10),o(),r(28,"div",11)(29,"button",12),s(30,"Save"),o()()(),p(31,De,4,1,"div",4)),n&2){let c;l(2),m("formGroup",i.form),l(9),m("ngIf",((c=i.form.get("title"))==null?null:c.dirty)&&((c=i.form.get("title"))==null?null:c.hasError("required"))),l(6),m("ngForOf",i.authors.controls),l(12),m("disabled",i.form.invalid),l(2),m("ngIf",i.submitted)}},dependencies:[be,me,ae,se,le,ue,de,pe,O,T,F],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.form-field[_ngcontent-%COMP%]{display:block;margin-top:1rem}.form-field[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.form-field[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding:12px 20px 12px 6px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;min-width:250px}.form-field-hint[_ngcontent-%COMP%]{display:block;color:#3c3c3c}.form-actions[_ngcontent-%COMP%]{margin-top:1rem}"]})}}return t})();var vt=[{path:"",component:ke},{path:"new",component:Ce},{path:"detail/:isbn",component:ge,canDeactivate:[ve]}];export{vt as bookRoutes};
