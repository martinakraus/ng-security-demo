import{$ as v,A as o,B as l,E as V,F as d,G as y,H as r,I as F,K as u,L as f,Q as M,S as $,T as U,U as g,V as H,W as q,X as z,Z as X,_ as h,aa as J,ba as K,c as T,ca as Q,d as I,da as P,e as R,fa as k,g as B,ga as w,i as m,ia as E,ja as L,k as G,l as j,la as N,ma as W,na as Y,oa as Z,pa as O,r as s,t as p,v as c,w as S,y as _,z as i}from"./chunk-B7XKK3HT.js";var ee=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-about"]],decls:5,vars:0,consts:[["routerLink","/",1,"link-blue"]],template:function(t,a){t&1&&(i(0,"section")(1,"h1"),r(2,"This app is all about your books."),o(),i(3,"a",0),r(4,"This link demonstrates the redirect of '/' to '/about'"),o()())},dependencies:[v],styles:["[_nghost-%COMP%]{height:50vh;display:grid;align-items:center;justify-content:center;color:#064d9e}.link-blue[_ngcontent-%COMP%]{color:#064d9e}"]})}}return e})();var b=(()=>{class e{constructor(){this.isLoggedIn=new T(!1),this.isLoggedIn$=this.isLoggedIn.asObservable()}login(){this.isLoggedIn.next(!0)}logout(){this.isLoggedIn.next(!1)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var A=(e,x)=>{let n=m(b),t=m(h);return n.isLoggedIn$.pipe(R(a=>{a||t.navigate(["/login"])}))};var te=(()=>{class e{constructor(){this.http=m(g),this.router=m(h),this.userStateService=m(b),this.formBuilder=m(Y),this.views=0,this.form=this.formBuilder.nonNullable.group({name:[""],password:[""]})}submit(){let n=this.form.getRawValue();this.http.post("/login",n).pipe(I(1)).subscribe(t=>{this.userStateService.login(),console.log(t),this.router.navigate(["/profile"])})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-login"]],decls:14,vars:1,consts:[[3,"ngSubmit","formGroup"],[1,"form-field"],["formControlName","name"],["formControlName","password"],[1,"form-actions"],["type","submit"]],template:function(t,a){t&1&&(i(0,"h2"),r(1,"New"),o(),i(2,"form",0),d("ngSubmit",function(){return a.submit()}),i(3,"label",1)(4,"span"),r(5,"Username"),o(),l(6,"input",2),o(),i(7,"label",1)(8,"span"),r(9,"Passwort"),o(),l(10,"input",3),o(),i(11,"div",4)(12,"button",5),r(13,"Login"),o()()()),t&2&&(s(2),S("formGroup",a.form))},dependencies:[O,E,P,k,w,L,N],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.form-field[_ngcontent-%COMP%]{display:block;margin-top:1rem}.form-field[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.form-field[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding:12px 20px 12px 6px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;min-width:250px}.form-field-hint[_ngcontent-%COMP%]{display:block;color:#3c3c3c}.form-actions[_ngcontent-%COMP%]{margin-top:1rem}"]})}}return e})();function le(e,x){if(e&1&&(i(0,"div",0)(1,"h2"),r(2),u(3,"async"),o(),i(4,"p"),r(5),u(6,"async"),o()()),e&2){let n,t,a=y();s(2),F(((n=f(3,2,a.user$))==null?null:n.username)||"No Username provided"),s(3),F(((t=f(6,4,a.user$))==null?null:t.email)||"No Email provided")}}function se(e,x){e&1&&(i(0,"div",0)(1,"h2"),r(2,"No data"),o(),i(3,"p"),r(4,"No data"),o()())}var oe=(()=>{class e{constructor(){this.http=m(g),this.user$=this.http.get("/api/profile")}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-profile"]],decls:6,vars:3,consts:[[1,"profile"],["routerLink","edit"]],template:function(t,a){t&1&&(c(0,le,7,6,"div",0),u(1,"async"),c(2,se,5,0,"div",0),i(3,"div")(4,"a",1),r(5,"Edit Profile"),o()()),t&2&&_(f(1,1,a.user$)?0:2)},dependencies:[M,v],encapsulation:2})}}return e})();var ie=(()=>{class e{constructor(){this.http=m(g),this.formBuilder=m(Z),this.form=this.formBuilder.group({username:[""],email:[""],password:[""]})}onSubmit(){let n=new U().set("username",this.form.value.username||"").set("password",this.form.value.password||"").set("email",this.form.value.email||""),t=new $({"Content-Type":"application/x-www-form-urlencoded"});this.http.post("/api/profile",n.toString(),{headers:t}).subscribe(()=>{alert("Profile updated")})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-profile-edit"]],decls:15,vars:1,consts:[[3,"ngSubmit","formGroup"],["for","username"],["formControlName","username","type","text","id","username","name","username","required",""],["for","password"],["formControlName","password","type","password","id","password","name","password","required",""],["for","email"],["formControlName","email","type","email","id","email","name","email","required",""],["type","submit"]],template:function(t,a){t&1&&(i(0,"form",0),d("ngSubmit",function(){return a.onSubmit()}),i(1,"div")(2,"label",1),r(3,"Username:"),o(),l(4,"input",2),o(),i(5,"div")(6,"label",3),r(7,"Password:"),o(),l(8,"input",4),o(),i(9,"div")(10,"label",5),r(11,"Email:"),o(),l(12,"input",6),o(),i(13,"button",7),r(14,"Submit"),o()()),t&2&&S("formGroup",a.form)},dependencies:[O,E,P,k,w,W,L,N],encapsulation:2})}}return e})();var ne=[{path:"",redirectTo:"/about",pathMatch:"full"},{path:"about",component:ee},{path:"login",component:te},{path:"profile",component:oe,canMatch:[A]},{path:"profile/edit",component:ie,canMatch:[A]},{path:"books",loadChildren:()=>import("./chunk-OKNA5DVB.js").then(e=>e.bookRoutes),canMatch:[A]}];var re={providers:[H(q({})),K(ne,Q())]};function ce(e,x){if(e&1){let n=V();i(0,"li")(1,"a",2),r(2,"Profil"),o()(),i(3,"li")(4,"a",3),d("click",function(a){G(n);let D=y();return j(D.logout(a))}),r(5,"Logout"),o()()}}function de(e,x){e&1&&(i(0,"li")(1,"a",4),r(2,"Login"),o()())}var ae=(()=>{class e{constructor(){this.userStateService=m(b),this.router=m(h),this.isLoggedIn$=this.userStateService.isLoggedIn$}logout(n){n.preventDefault(),this.userStateService.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-navigation"]],decls:10,vars:3,consts:[["routerLink","/books","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/profile","routerLinkActive","active"],[3,"click"],["routerLink","/login","routerLinkActive","active"]],template:function(t,a){t&1&&(i(0,"ul")(1,"li")(2,"a",0),r(3,"Books"),o()(),i(4,"li")(5,"a",1),r(6,"About"),o()(),c(7,ce,6,0),u(8,"async"),c(9,de,3,0,"li"),o()),t&2&&(s(7),_(f(8,1,a.isLoggedIn$)?7:9))},dependencies:[v,J,M],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:14px 16px;text-decoration:none}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#111}ul[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#4caf50}"]})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(t,a){t&1&&l(0,"app-navigation")(1,"router-outlet")},dependencies:[ae,X],encapsulation:2})}}return e})();z(me,re).catch(e=>console.error(e));
